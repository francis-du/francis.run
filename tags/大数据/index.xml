<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>大数据 | Francis Du</title><link>https://francis.run/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/</link><atom:link href="https://francis.run/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/index.xml" rel="self" type="application/rss+xml"/><description>大数据</description><generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><copyright>© Copyright [Francis Du](https://twitter.com/francis_run) | [Ink](https://github.com/knadh/hugo-ink) theme on [Hugo](https://gohugo.io)</copyright><lastBuildDate>Sun, 28 Jul 2019 21:01:41 +0000</lastBuildDate><item><title>HBase源码阅读环境搭建</title><link>https://francis.run/blog/hbase%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</link><pubDate>Sun, 28 Jul 2019 21:01:41 +0000</pubDate><guid>https://francis.run/blog/hbase%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</guid><description>&lt;p>&lt;img src="https://francis.run/img/hbase.png" alt="">&lt;/p>
&lt;ol>
&lt;li>克隆源码&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-fallback" data-lang="fallback">git clone git@github.com:apache/hbase.git
&lt;/code>&lt;/pre>&lt;/div>&lt;ol>
&lt;li>选择分支&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-fallback" data-lang="fallback">git checkout branch-2.2(自己选一个分支)
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>修改脚本
如果你的操作系统是Windows，请修改脚本 &lt;code>hbase\hbase-common\src\saveVersion.sh&lt;/code>
这里的&lt;code>${hostname}&lt;/code> &lt;code>${user}&lt;/code> 都改成你的用户名，或者写死，随便都可以。
原因是因为在 cygwin 环境下执行此脚本的时候会多获取一个回车，
会导自动生成的Version.java类无法编译。&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-java" data-lang="java">&lt;span style="color:#008000">// 要修改的地方
&lt;/span>&lt;span style="color:#008000">&lt;/span>Line 45 url=&lt;span style="color:#a31515">&amp;#34;git://${hostname}{cwd}&amp;#34;&lt;/span>
Line 76 &lt;span style="color:#00f">public&lt;/span> &lt;span style="color:#00f">static&lt;/span> &lt;span style="color:#00f">final&lt;/span> String user = &lt;span style="color:#a31515">&amp;#34;${user}&amp;#34;&lt;/span>;
&lt;span style="color:#008000">// 自动生成的 Version 类
&lt;/span>&lt;span style="color:#008000">&lt;/span>&lt;span style="color:#008000">/*
&lt;/span>&lt;span style="color:#008000"> * Generated by src/saveVersion.sh
&lt;/span>&lt;span style="color:#008000"> */&lt;/span>
&lt;span style="color:#00f">package&lt;/span> org.apache.hadoop.hbase;
&lt;span style="color:#00f">import&lt;/span> org.apache.yetus.audience.InterfaceAudience;
@InterfaceAudience.Private
&lt;span style="color:#00f">public&lt;/span> &lt;span style="color:#00f">class&lt;/span> &lt;span style="color:#2b91af">Version&lt;/span> {
&lt;span style="color:#00f">public&lt;/span> &lt;span style="color:#00f">static&lt;/span> &lt;span style="color:#00f">final&lt;/span> String version = &lt;span style="color:#a31515">&amp;#34;2.2.1-SNAPSHOT&amp;#34;&lt;/span>;
&lt;span style="color:#00f">public&lt;/span> &lt;span style="color:#00f">static&lt;/span> &lt;span style="color:#00f">final&lt;/span> String revision = &lt;span style="color:#a31515">&amp;#34;ac0375685291b72f45a800ebb1cca02901042bb7&amp;#34;&lt;/span>;
&lt;span style="color:#00f">public&lt;/span> &lt;span style="color:#00f">static&lt;/span> &lt;span style="color:#00f">final&lt;/span> String user = &lt;span style="color:#a31515">&amp;#34;francis&amp;#34;&lt;/span>;
&lt;span style="color:#00f">public&lt;/span> &lt;span style="color:#00f">static&lt;/span> &lt;span style="color:#00f">final&lt;/span> String date = &lt;span style="color:#a31515">&amp;#34;Sun Jul 28 17:23:04 2019&amp;#34;&lt;/span>;
&lt;span style="color:#00f">public&lt;/span> &lt;span style="color:#00f">static&lt;/span> &lt;span style="color:#00f">final&lt;/span> String url = &lt;span style="color:#a31515">&amp;#34;git://francis/cygdrive/d/Java/hbase&amp;#34;&lt;/span>;
&lt;span style="color:#00f">public&lt;/span> &lt;span style="color:#00f">static&lt;/span> &lt;span style="color:#00f">final&lt;/span> String srcChecksum = &lt;span style="color:#a31515">&amp;#34;88f3dc17f75ffda6176faa649593b54e&amp;#34;&lt;/span>;
}
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="4">
&lt;li>修改pom
     如果你的操作系统是Windows，请修改pom文件 &lt;code>hbase\hbase-common\pom.xml&lt;/code>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-java" data-lang="java">&lt;span style="color:#008000">// 把这里的 bash 改成 sh，否则你的 windows 无法执行以上脚本
&lt;/span>&lt;span style="color:#008000">&lt;/span>Line 95 &amp;lt;exec executable=&lt;span style="color:#a31515">&amp;#34;sh&amp;#34;&lt;/span> failonerror=&lt;span style="color:#a31515">&amp;#34;true&amp;#34;&lt;/span>&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="5">
&lt;li>编译源码&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-fallback" data-lang="fallback">mvn clean install -DskipTests assembly:single
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="6">
&lt;li>调试配置&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>配置并启动 HMaster&lt;/li>
&lt;/ul>
&lt;p>&lt;code>配置 HMaster 启动参数：如果不配置 log4j, HMaster无法启动&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://francis.run/img/hmaster.png" alt="">
&lt;code>HMaster 启动成功&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://francis.run/img/hmaster-run.png" alt="">
&lt;code>进入HBase Web UI 查看 http://localhost:16010,启动HMaster之后会默认给你启动一个Hregionserver.&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://francis.run/img/hbase-webui.png" alt="">&lt;/p>
&lt;ul>
&lt;li>配置并启动 HHbase Shell&lt;/li>
&lt;/ul>
&lt;p>&lt;code>配置 HBase Shell 启动参数&lt;/code>
&lt;img src="https://francis.run/img/hbase-shell.png" alt="">&lt;/p>
&lt;p>&lt;code>HBase Shell 启动成功&lt;/code>
&lt;img src="https://francis.run/img/hbase-shell-run.png" alt="">&lt;/p></description></item></channel></rss>